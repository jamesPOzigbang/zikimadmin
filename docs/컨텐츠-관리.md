# 컨텐츠 관리 페이지 PRD

## 📄 페이지 정보

- **파일명**: `content-management-standalone.html`
- **페이지명**: 리포트 컨텐츠 관리
- **URL 경로**: `/content-management-standalone.html`

---

## 1. 개요

### 1.1 페이지 목적

컨텐츠 관리 페이지는 리포트에 표시되는 주요 안내 문구를 관리하는 페이지입니다. 관리자는 이 페이지를 통해 리포트의 각 체크리스트 항목에 대한 안내, 설명, 특약 내용을 수정하고 관리할 수 있습니다.

### 1.2 주요 기능

- **다차원 필터링**: 거래 유형, 건물 유형, 카테고리, 상태별 필터링 제공
- **체크리스트 항목별 컨텐츠 관리**: 23개 체크리스트 항목에 대한 독립적 관리
- **상태별 카드 분리**: 각 체크리스트 항목의 상태(양호/확인필요/기타)를 개별 카드로 분리하여 관리
- **컨텐츠 타입별(안내/설명/특약) 관리**: 각 카드 내에서 타입별 컨텐츠 편집
- **동적 필드 추가 및 삭제**: 필요한 만큼 입력 필드를 동적으로 추가
- **컨텐츠 저장 및 수정 이력 관리**: 개별 저장 기능 및 최종 수정일 표시

### 1.3 사용자 시나리오

관리자가 특정 상황(예: 매매, 빌라, 위반건축물, 확인필요)에 대한 안내 문구를 수정해야 할 때, 상단 필터를 사용하여 해당하는 카드를 조회합니다. 필터링된 카드 중 수정이 필요한 카드를 찾아 안내/설명/특약 내용을 수정한 후 저장합니다.

---

## 2. 정책

### 2.1 접근 권한

- **관리자 권한**: 컨텐츠 수정 권한이 있는 관리자만 접근 가능
- **인증**: 관리자 인증이 완료된 사용자만 접근 가능

### 2.2 컨텐츠 분류 정책

#### 2.2.1 필터 분류 (조회 조건)

컨텐츠는 다음 4가지 조건을 조합하여 관리됩니다:

1. **거래 유형**: 매매, 전세, 월세
2. **건물 유형**: 일반건물, 집합건물
3. **카테고리**: 25개 체크리스트 항목 (거래 유형에 따라 활성화/비활성화)
4. **상태**: 양호, 확인필요, 기타
5. **토지 구분**: 토지별도등기 항목 선택 시 활성화

#### 2.2.2 거래 유형별 항목 노출 정책 (Item Availability)

체크리스트 항목은 거래 유형(매매/전세/월세)에 따라 노출 여부가 결정됩니다.

| 구분 | 매매 | 전세 | 월세 | 항목 목록 |
| :---: | :---: | :---: | :---: | :--- |
| **매매 전용** | O | X | X | 토지허가거래구역, 전매제한기간 |
| **임대(전/월세) 전용** | X | O | O | 최우선 변제권, 보증금미반환 이력, 여유금액, 보증보험 예비심사, 보증금 대출 예비 심사, 전세권, 임대사업자 등록 |
| **공통** | O | O | O | 그 외 모든 항목 (임차권등기명령, 민간임대주택등록 여부 포함) |

> 거래 유형 필터 변경 시, 해당 유형에서 지원하지 않는 항목은 자동으로 **비활성화(Disabled)** 처리됩니다.

#### 2.2.3 상태 분류

각 체크리스트 항목은 다음 3가지 상태로 분류됩니다:

- **양호 (Safe)**: 특이사항이 없는 안정적인 상태
- **확인필요 (Caution)**: 주의나 확인이 필요한 상태
- **기타 (Other)**: 위 두 상태에 해당하지 않거나 예외적인 상태

#### 2.2.4 컨텐츠 타입 분류

각 카드 내에서 다음 3가지 컨텐츠 타입을 관리합니다:

- **안내**: 결과에 대한 사용자 가이드
- **설명**: 항목에 대한 정의 및 상세 설명
- **특약**: 계약서 특약 사항 내용 (단, '기타' 상태는 제외)

### 2.3 초기 필터 설정 (Default State)

페이지 진입 시 필터는 다음과 같이 초기화됩니다:

- **거래 유형**: `매매`
- **건물 유형**: `일반건물`
- **상태**: `양호`
- **컨텐츠 타입**: `안내`
- **항목**: `전체`
- **토지 구분**: `구분지상권` (토지별도등기 선택 시 유효)

### 2.4 컨텐츠 수정 정책

- **저장 시점**: 각 컨텐츠 타입별로 개별 저장 가능
- **수정 이력**: 최종 수정 일시가 각 카드 헤더에 표시됨
- **독립적 관리**: 모든 카드는 [항목-거래-건물-상태]의 고유한 조합으로 독립적으로 관리됨

### 2.5 특수 항목 정책

- **토지별도등기**: 이 항목에만 토지 유형 드롭다운이 제공됨 (구분지상권, 근저당권, 구분상권+근저당권, 기타)
- **기타 상태**: '기타' 상태의 카드는 '특약' 입력란을 제공하지 않음

### 2.6 동적 필드 관리 정책

- **필드 추가**: 각 컨텐츠 타입별로 여러 개의 필드를 추가할 수 있음
- **필드 삭제**: 추가된 필드는 삭제 가능 (최소 1개는 유지)
- **필드 구조**: 각 필드는 제목과 내용으로 구성됨

---

## 3. 기능

### 3.1 필터 및 조회

#### 3.1.1 필터 그룹

상단에 4개의 필터 그룹이 제공됩니다. 각 그룹은 '전체 선택' 기능을 포함합니다.

- **거래 유형**: 매매 / 전세 / 월세
- **건물 유형**: 일반건물 / 집합건물
- **카테고리**: 전체 체크리스트 항목 선택/해제
- **상태**: 양호 / 확인필요 / 기타

#### 3.1.2 리얼타임 필터링

- 체크박스 선택/해제 시 즉시 하단의 카드 목록이 필터링되어 표시됩니다.
- 필터 조건에 맞는 모든 조합의 카드가 나열됩니다.

### 3.2 체크리스트 항목 관리

#### 3.2.1 체크리스트 항목 목록 (총 23개)

- 주택유형 (신규)
- 추정시세 (신규)
- 위반건축물
- 대지권
- 토지별도등기
- 가등기
- 압류/가압류
- 처분금지가처분
- 신탁
- 경매개시결정
- 근저당권
- 임차권등기명령
- 전세권
- 민간임대주택등록 여부
- 등기사항 변경예정
- 건물,토지 소유자 일치
- 임대사업자 등록
- 보증금미반환 이력
- 기존채무금액
- 여유금액
- 보증보험 예비심사
- 보증금 대출 예비 심사
- 최우선 변제권

#### 3.2.2 항목 카드 구조

각 카드는 하나의 고유한 조합(아이템 + 거래 + 건물 + 상태)을 나타냅니다.

- **헤더**: 항목명, 적용된 태그(거래/건물/상태), 최종 수정 일시
- **컨텐츠 영역**: 선택된 컨텐츠 타입(안내/설명/특약)의 입력 폼

### 3.3 컨텐츠 편집

#### 3.3.1 컨텐츠 타입 전환 (라디오 버튼)

- **안내 / 설명 / 특약** 라디오 버튼을 통해 편집할 대상을 선택합니다.
- '기타' 상태인 경우 **특약** 버튼이 표시되지 않습니다.

#### 3.3.2 동적 입력 폼

- **+ 추가하기**: 새로운 제목/내용 입력 블록 추가
- **삭제**: 개별 입력 블록 삭제
- **저장하기**: 현재 활성화된 타입의 내용을 저장

### 3.4 데이터 저장 및 관리

#### 3.4.1 개별 저장

- 각 카드의 각 컨텐츠 타입(안내/설명/특약)별로 독립적인 '저장' 버튼이 존재합니다.
- 저장 시 해당 부분의 데이터만 업데이트되며, 최종 수정 일시가 갱신됩니다.

---

## 4. 유저스토리

### 4.1 조건별 컨텐츠 필터링

**As a** 관리자
**I want to** 거래 유형, 건물 유형, 상태 등 다양한 조건으로 카드를 필터링할 수 있어야
**So that** 특정 조건에 해당하는 안내 문구만 빠르게 찾아서 수정할 수 있다

**Acceptance Criteria:**

- 4가지 필터 그룹(거래, 건물, 카테고리, 상태)이 제공된다.
- 필터 선택에 따라 실시간으로 카드 목록이 갱신된다.
- '전체' 체크박스를 통해 그룹 내 모든 항목을 한 번에 선택/해제할 수 있다.

### 4.2 상태별 카드 관리

**As a** 관리자
**I want to** '양호', '확인필요', '기타' 상태가 각각 별도의 카드로 분리되어 보여야
**So that** 각 상태별로 명확하게 구분된 컨텐츠를 작성하고 관리할 수 있다.

**Acceptance Criteria:**

- 동일한 항목이라도 상태가 다르면 별도의 카드로 표시된다.
- 각 카드는 해당 상태에 맞는 배지(Badge)를 표시한다.

### 4.3 예외적 컨텐츠 타입 처리

**As a** 관리자
**I want to** '기타' 상태일 때는 특약 입력란이 보이지 않아야
**So that** 불필요한 입력을 방지하고 인터페이스를 단순화할 수 있다.

**Acceptance Criteria:**

- 상태가 '기타'인 카드에는 '특약' 라디오 버튼이 노출되지 않는다.
- 그 외 상태(양호, 확인필요)에는 '특약' 입력란이 정상적으로 제공된다.
